let createTimeOfInterest,createEarth,createMercury,createVenus,createMars,createJupiter,createSaturn,createNeptune;_6af‍.w("astronomy-bundle/time",[["createTimeOfInterest",["createTimeOfInterest"],function(v){createTimeOfInterest=v}]]);_6af‍.w("astronomy-bundle/earth",[["createEarth",["createEarth"],function(v){createEarth=v}]]);_6af‍.w("astronomy-bundle/planets",[["createMercury",["createMercury"],function(v){createMercury=v}],["createVenus",["createVenus"],function(v){createVenus=v}],["createMars",["createMars"],function(v){createMars=v}],["createJupiter",["createJupiter"],function(v){createJupiter=v}],["createSaturn",["createSaturn"],function(v){createSaturn=v}],["createNeptune",["createNeptune"],function(v){createNeptune=v}]]);const express = require('express');
const formidable = require('express-formidable');
const app = express();
const fs = require('fs');





app.use(express.static(__dirname+'/index-axios.html'));
app.use(formidable());

app.get('/', (req, res)=>{
	res.sendFile(__dirname+'/index-axios.html');
});

app.get('/JSON', (req, res)=>{
	res.sendFile(__dirname+'/data.json');
});

app.post('/', (req, res)=>{

	const myDate = new Date(req.fields.date);

	async function planets_now(){

		try {
		const toi = createTimeOfInterest.fromDate(myDate);
		let earth = createEarth(toi);
		let mars = createMars(toi);	

		let positionea = await earth.getHeliocentricEclipticSphericalJ2000Coordinates();
		let positionma = await mars.getHeliocentricEclipticSphericalJ2000Coordinates();

		const data = {
			'earth':positionea,
			'mars':positionma };

	const dataJSON = JSON.stringify(data, null, 4);
	fs.writeFile('./data.json', dataJSON, (err) => {
		if (err) {
			throw err;
		}
		console.log("JSON data is saved.");
	});

	_6af‍.g.console.log('data:', data);
} catch(err) {
	alert(err);
} finally {
	res.send(JSON.stringify(data));
	}


	}
	planets_now();
	_6af‍.g.console.log('myDate:',myDate);
});

app.listen(process.env.PORT || 3000, 
	() => console.log('Server is running ...'));